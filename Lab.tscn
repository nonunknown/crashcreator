[gd_scene load_steps=26 format=2]

[ext_resource path="res://gameplay/crates/obj_crate_nitro.tscn" type="PackedScene" id=1]
[ext_resource path="res://gameplay/crates/obj_crate_wood_jump.tscn" type="PackedScene" id=2]
[ext_resource path="res://gameplay/crates/obj_crate_checkpoint.tscn" type="PackedScene" id=3]
[ext_resource path="res://gameplay/obj_Character.tscn" type="PackedScene" id=4]
[ext_resource path="res://gameplay/crates/obj_crate_enforced.tscn" type="PackedScene" id=5]
[ext_resource path="res://gameplay/crates/obj_crate_life.tscn" type="PackedScene" id=6]
[ext_resource path="res://gameplay/crates/obj_crate_bounce.tscn" type="PackedScene" id=7]
[ext_resource path="res://scripts/gameplay/GameplayCamera.gd" type="Script" id=8]
[ext_resource path="res://textures/lv_toadvillage/tex_ground.png" type="Texture" id=9]
[ext_resource path="res://gameplay/crates/obj_crate_simple.tscn" type="PackedScene" id=10]
[ext_resource path="res://gameplay/crates/obj_crate_question.tscn" type="PackedScene" id=11]
[ext_resource path="res://gameplay/crates/obj_crate_tnt.tscn" type="PackedScene" id=12]
[ext_resource path="res://Debug/DebugText.tscn" type="PackedScene" id=13]
[ext_resource path="res://gameplay/crates/obj_crate_aku.tscn" type="PackedScene" id=14]
[ext_resource path="res://gameplay/obj_Wumpa.tscn" type="PackedScene" id=15]
[ext_resource path="res://gameplay/obj_item_clock.tscn" type="PackedScene" id=17]
[ext_resource path="res://gui/gameplay/GUI_Clock.tscn" type="PackedScene" id=18]
[ext_resource path="res://scripts/gameplay/GameplayManager.gd" type="Script" id=20]
[ext_resource path="res://gui/gameplay/GUI_Iventory.tscn" type="PackedScene" id=21]

[sub_resource type="GDScript" id=1]
script/source = "extends Spatial

func _ready():
	GameManager.set_gamemode(GameManager.MODE.PLAY)
	print(name)
"

[sub_resource type="GDScript" id=2]
script/source = "extends Spatial

export var p_character:PackedScene
export var p_camera:Script
# Called when the node enters the scene tree for the first time.
func _ready():
#	var character = p_character.instance()
#	add_child(character)
#	character.add_to_group(\"player\")
#	var cam = Camera.new()
#	add_child(cam)
#	cam.set_script(p_camera)
#	print(str(character.get_groups()))
#	cam.config()
#	var cam = Camera.new()
#	add_child(cam)
##	cam.set_script(p_camera)
#	cam.translation = Vector3(0,5,0)
#
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
#func _process(delta):
#	pass
"

[sub_resource type="SpatialMaterial" id=3]
albedo_texture = ExtResource( 9 )
uv1_scale = Vector3( 20, 20, 1 )

[sub_resource type="PlaneMesh" id=4]
material = SubResource( 3 )
size = Vector2( 3, 3 )

[sub_resource type="ConcavePolygonShape" id=5]
data = PoolVector3Array( 1.5, 0, 1.5, -1.5, 0, 1.5, 1.5, 0, -1.5, -1.5, 0, 1.5, -1.5, 0, -1.5, 1.5, 0, -1.5 )

[sub_resource type="GDScript" id=6]
script/source = "extends Spatial

func _ready():
	GameManager.set_gamemode(GameManager.MODE.PLAY)
	print(name)
"

[node name="Lab" type="Spatial" groups=[
"scene",
]]
script = SubResource( 1 )

[node name="Gameplay" type="Spatial" parent="." groups=[
"gameplay_manager",
"gameplay_ready",
]]
script = ExtResource( 20 )
simulate_ready = true

[node name="Player" type="Spatial" parent="Gameplay"]
script = SubResource( 2 )
p_character = ExtResource( 4 )
p_camera = ExtResource( 8 )

[node name="obj_Wumpa" parent="Gameplay/Player" instance=ExtResource( 15 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 5.76196, 0.9, -2.53175 )

[node name="HUD" type="Control" parent="Gameplay"]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="GUI_Iventory" parent="Gameplay/HUD" groups=[
"hud",
] instance=ExtResource( 21 )]
visible = false
g_wumpa = NodePath("../../../Gameplay/HUD/GUI_Iventory/GridContainer/Wumpa/amt")
g_life = NodePath("../../../Gameplay/HUD/GUI_Iventory/GridContainer/Life/amt")
g_crate = NodePath("../../../Gameplay/HUD/GUI_Iventory/GridContainer/Crate/amt")

[node name="GUI_Clock" parent="Gameplay/HUD" groups=[
"hud",
] instance=ExtResource( 18 )]
visible = false

[node name="DebugText" parent="Gameplay/HUD" instance=ExtResource( 13 )]

[node name="Path" type="Spatial" parent="Gameplay"]

[node name="MeshInstance" type="MeshInstance" parent="Gameplay/Path"]
transform = Transform( 9.27919, 0, 0, 0, 9.27919, 0, 0, 0, 9.27919, -0.00164016, 0.0174209, 0.00986082 )
mesh = SubResource( 4 )
material/0 = null

[node name="StaticBody" type="StaticBody" parent="Gameplay/Path/MeshInstance"]
collision_layer = 17

[node name="CollisionShape" type="CollisionShape" parent="Gameplay/Path/MeshInstance/StaticBody"]
shape = SubResource( 5 )

[node name="Items" type="Spatial" parent="Gameplay"]

[node name="Enemies" type="Spatial" parent="Gameplay"]

[node name="Entities" type="Spatial" parent="Gameplay"]

[node name="obj_Character" parent="Gameplay/Entities" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0329046, 0.54602, 2.58163 )
collision_mask = 190
jump_force = 11
use_debugger = true

[node name="Camera" type="Camera" parent="Gameplay/Entities"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1.10367, 3.69873, 8.73469 )
size = 7.79504
script = ExtResource( 8 )

[node name="obj_item_clock" parent="Gameplay/Entities" instance=ExtResource( 17 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4.21561, 0.217421, -1.28501 )

[node name="Crate" type="Spatial" parent="Gameplay"]

[node name="Level" type="Spatial" parent="Gameplay/Crate"]
transform = Transform( 1.01525, 0, 0, 0, 1.01525, 0, 0, 0, 1.01525, 0, 0, 0 )

[node name="obj_crate_bounce2" parent="Gameplay/Crate" instance=ExtResource( 7 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -6, 0, 7 )

[node name="obj_crate_bounce3" parent="Gameplay/Crate" instance=ExtResource( 7 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -6, 4, 7 )

[node name="obj_crate_nitro" parent="Gameplay/Crate" instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 1, 6 )

[node name="obj_crate_checkpoint" parent="Gameplay/Crate" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0, 7 )

[node name="obj_crate_bounce" parent="Gameplay/Crate" instance=ExtResource( 7 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, 3 )

[node name="obj_crate_enforced" parent="Gameplay/Crate" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 4 )

[node name="obj_crate_life" parent="Gameplay/Crate" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 1 )

[node name="obj_crate_question" parent="Gameplay/Crate" instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 6 )

[node name="obj_crate_simple" parent="Gameplay/Crate" instance=ExtResource( 10 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 0, 8 )

[node name="obj_crate_tnt" parent="Gameplay/Crate" instance=ExtResource( 12 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 0, 9 )

[node name="obj_crate_wood_jump" parent="Gameplay/Crate" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 0, 5 )

[node name="obj_crate_wood_jump2" parent="Gameplay/Crate" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 5, 5 )

[node name="obj_crate_aku2" parent="Gameplay/Crate" instance=ExtResource( 14 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -6, 0, -4 )

[node name="obj_crate_aku3" parent="Gameplay/Crate" instance=ExtResource( 14 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -6, 4, -4 )

[node name="obj_crate_enforced2" parent="Gameplay/Crate" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 0, -4 )

[node name="obj_crate_enforced3" parent="Gameplay/Crate" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -3, 4, -4 )

[node name="obj_crate_life2" parent="Gameplay/Crate" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, -2 )

[node name="obj_crate_life3" parent="Gameplay/Crate" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 4, -2 )

[node name="obj_crate_question2" parent="Gameplay/Crate" instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, -7 )

[node name="obj_crate_question3" parent="Gameplay/Crate" instance=ExtResource( 11 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 4, -7 )

[node name="obj_crate_simple2" parent="Gameplay/Crate" instance=ExtResource( 10 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 0, -7 )

[node name="obj_crate_simple3" parent="Gameplay/Crate" instance=ExtResource( 10 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 4, -7 )

[node name="obj_crate_aku" parent="Gameplay/Crate" instance=ExtResource( 14 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, -1 )

[node name="obj_crate_aku4" parent="Gameplay/Crate" instance=ExtResource( 14 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 4, -2 )

[node name="obj_crate_aku5" parent="Gameplay/Crate" instance=ExtResource( 14 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 4, 0, 0 )

[node name="obj_crate_checkpoint2" parent="Gameplay/Crate" instance=ExtResource( 3 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 0, -7 )

[node name="obj_crate_nitro2" parent="Gameplay/Crate" instance=ExtResource( 1 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, -1 )

[node name="obj_crate_tnt2" parent="Gameplay/Crate" instance=ExtResource( 12 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, -3 )
mass = 50.0

[node name="Start" type="Spatial" parent="."]
script = SubResource( 6 )
