[gd_scene load_steps=14 format=2]

[ext_resource path="res://models/items/Crystal/Crystal Texture Vertex Colors.png" type="Texture" id=1]
[ext_resource path="res://models/items/Crystal/Power Crystal.obj" type="ArrayMesh" id=2]
[ext_resource path="res://sprites/particle/glow.png" type="Texture" id=3]
[ext_resource path="res://scripts/gameplay/Item_Crystal.gd" type="Script" id=4]
[ext_resource path="res://sounds/item/crystal_collect.ogg" type="AudioStream" id=5]

[sub_resource type="SpatialMaterial" id=1]
flags_unshaded = true
flags_vertex_lighting = true
params_blend_mode = 1
albedo_color = Color( 0.945098, 0.541176, 0.521569, 1 )
albedo_texture = ExtResource( 1 )

[sub_resource type="Curve" id=2]
min_value = -10.0
max_value = 10.0
_data = [ Vector2( 0, 0 ), 0.0, 1.0, 0, 1, Vector2( 1, 1 ), 1.0, 0.0, 1, 0 ]

[sub_resource type="CurveTexture" id=3]
curve = SubResource( 2 )

[sub_resource type="ParticlesMaterial" id=4]
emission_shape = 2
emission_box_extents = Vector3( 1, 1, 1 )
gravity = Vector3( 0, 0, 0 )
initial_velocity_random = 0.13
angular_velocity = 100.8
linear_accel = 4.94
radial_accel = 10.0
radial_accel_curve = SubResource( 3 )
color = Color( 1, 0, 0.945098, 1 )
hue_variation = 1.0
hue_variation_random = 0.98

[sub_resource type="SpatialMaterial" id=5]
params_blend_mode = 1
params_billboard_mode = 3
particles_anim_h_frames = 1
particles_anim_v_frames = 1
particles_anim_loop = false
albedo_color = Color( 0.882353, 0.482353, 0.8, 1 )
albedo_texture = ExtResource( 3 )
metallic_specular = 0.0
clearcoat_enabled = true
clearcoat = 1.0
clearcoat_gloss = 0.5

[sub_resource type="QuadMesh" id=6]
material = SubResource( 5 )

[sub_resource type="BoxShape" id=7]
extents = Vector3( 15.0555, 50.7549, 20.7018 )

[sub_resource type="Animation" id=8]
resource_name = "rotate"
length = 4.0
loop = true
tracks/0/type = "transform"
tracks/0/path = NodePath("model")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = PoolRealArray(  )
tracks/1/type = "value"
tracks/1/path = NodePath("model:rotation_degrees")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 0.001, 4 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector3( 0, 3.73387e-05, 0 ), Vector3( 0, 3.73387e-05, 0 ), Vector3( 0, 360, 0 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("model:translation")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 2, 4 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 0,
"values": [ Vector3( 0.0884778, 0.0951841, -0.0488538 ), Vector3( 0.088, 0.296, -0.049 ), Vector3( 0.0884778, 0.0951841, -0.0488538 ) ]
}

[node name="obj_item_crystal" type="Spatial"]
transform = Transform( 1.2, 0, 0, 0, 1.2, 0, 0, 0, 1.2, 0, 0, 0 )
script = ExtResource( 4 )

[node name="model" type="MeshInstance" parent="."]
transform = Transform( 0.0220518, 0, 1.43708e-08, 0, 0.0220518, 0, -1.43708e-08, 0, 0.0220518, 0.0884778, 0.0951841, -0.0488538 )
mesh = ExtResource( 2 )
material/0 = SubResource( 1 )

[node name="OmniLight" type="OmniLight" parent="model"]
transform = Transform( 37.7898, 0, -3.09228e-11, 0, 37.7898, 0, 3.09228e-11, 0, 37.7898, -4.01227, 111.543, 2.21541 )
light_color = Color( 0.870588, 0.372549, 0.780392, 1 )

[node name="fx_collect" type="Particles" parent="."]
transform = Transform( 0.42748, 0, -0.62102, 0, 0.753924, 0, 0.62102, 0, 0.42748, 0.206448, 1.11351, -0.113992 )
emitting = false
amount = 20
lifetime = 2.0
one_shot = true
explosiveness = 1.0
visibility_aabb = AABB( -2.36994, -4, -3.41114, 5.17739, 8, 5.80372 )
process_material = SubResource( 4 )
draw_pass_1 = SubResource( 6 )

[node name="Area" type="Area" parent="."]
transform = Transform( 0.0125035, 0, -0.0181644, 0, 0.0220518, 0, 0.0181644, 0, 0.0125035, 0.0884778, 0.141989, -0.0488538 )
collision_layer = 4
collision_mask = 0

[node name="CollisionShape" type="CollisionShape" parent="Area"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 43.1451, 0 )
shape = SubResource( 7 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
autoplay = "rotate"
anims/rotate = SubResource( 8 )

[node name="sfx" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource( 5 )
unit_db = 10.0
[connection signal="area_entered" from="Area" to="." method="_on_Area_area_entered"]
